---
import Wraper from '@components/Wraper.astro'
import { SEO } from '@configs/home'
import getBlogMd from '@utils/getBlogMd'

const posts = await Astro.glob('../../posts/blog/**/*.md')
const postsReplace = posts.map((post) => {
  const frontmatter = post.frontmatter
  const TITLE = frontmatter.title
  let slug = frontmatter.slug
  slug =
    slug === undefined || slug === false
      ? getBlogMd(post.file)
      : frontmatter.slug
  return { TITLE, slug }
})
---

<Wraper SEO={SEO}>
  <main class='flex flex-wrap mx-10'>
    {
      postsReplace.map(({ slug, TITLE }) => {
        return (
          <div class='bg-base-300 m-5 py-3 px-5 rounded-md w-fit'>
            <h2 class='card-title'>
              <a href={`./blog/${slug}`}>{TITLE}</a>
            </h2>
          </div>
        )
      })
    }
  </main>
</Wraper>
