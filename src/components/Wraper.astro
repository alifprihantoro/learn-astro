---
import Seo from '@components/Seo'
import '../style/main.scss'
import Nav from '@components/nav'
import Footer from '@components/footer'
import CookiesAccept from '@components/CookiesAccept'
const { INFO_SEO } = Astro.props
const MODE = import.meta.env.NODE_ENV !== 'development'
---

<html lang='en' data-theme='dark'>
  <head>
    <meta charset='UTF-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    {MODE && <Seo seo={INFO_SEO} />}
    <link rel="stylesheet" href="/hi.css">
  </head>
  <body class='w-full md:w-[900px] mx-auto bg-base-200 font-Lato'>
    <CookiesAccept />
    <a
      href='#content'
      tabindex='1'
      class='btn opacity-0 focus:opacity-100 fixed -z-[99] focus:z-[99]'
    >Menuju ke konten</a
    >
    <Nav />
    <slot />
    <Footer />
    <script define:vars={{ Footer }}>
      let isConfirm = () => localStorage.getItem('confirm-cookies') === 'y'
      const BTN_COOKIES = document.getElementById('btn-cookies-acc')
      const BODY_COOKIES = document.getElementById('btn-cookies-body')
      if (isConfirm()) {
        BODY_COOKIES.remove()
      } else {
        BTN_COOKIES.onclick = function () {
          localStorage.setItem('confirm-cookies', 'y')
          BODY_COOKIES.remove()
        }
      }

      console.log(Footer)
      let isLight = () => localStorage.getItem('dark-mode') === 'light'

      const DARK_BTN = document.getElementById('dark-btn')
      if (isLight()) {
        document.childNodes[1].setAttribute('data-theme', 'light')
        DARK_BTN.checked = false
      }
      DARK_BTN.onchange = function () {
        if (isLight()) {
          localStorage.setItem('dark-mode', 'dark')
          document.childNodes[1].setAttribute('data-theme', 'dark')
          return
        }
        localStorage.setItem('dark-mode', 'light')
        document.childNodes[1].setAttribute('data-theme', 'light')
      }
    </script>
  </body>
</html>
